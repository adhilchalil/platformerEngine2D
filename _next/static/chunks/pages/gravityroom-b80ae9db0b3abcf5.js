(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{4382:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gravityroom",function(){return i(2565)}])},2565:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return W}});var o=i(5893);function l(e){let{ballradius:t,ballcolor:i,XCordinate:l,YCordinate:a,XVelocity:r,YVelocity:n,gravity:s,isPlayer:d,srcImage:c,hitboxRadiusRatio:h,showHitBox:g,showBorder:y,modelAlignmentTop:m,modelAlignmentLeft:u}=e;return(0,o.jsx)("div",{className:"absolute rounded-full domItem overflow-visible"+(s?" gravity":"")+(d?" playercharacter":"")+(d&&r<0?" imgflip":""),style:{border:(g||y?"1px":"0px")+" solid black",backgroundColor:i||g?i||"rgba(255, 0, 0, 0.3)":"rgba(255, 0, 0, 0)",width:2*t+"px",height:2*t+"px",bottom:a+"px",left:l+"px"},children:(d||c)&&(0,o.jsx)("img",{className:"imagecenter"+(d?" imageFrames":""),style:{transform:"scale("+h+")",width:2*t+"px",height:2*t+"px",top:"".concat(m||50)+"%",left:"".concat(u||50)+"%"},src:"".concat(c)})})}function a(e){let{height:t,width:i,boxcolor:l,XCordinate:a,YCordinate:r,XVelocity:n,YVelocity:s,gravity:d,isPlayer:c,tilt:h,srcImage:g,hitboxWidthRatio:y,hitboxHeightRatio:m,showHitBox:u,showBorder:p,modelAlignmentTop:f,modelAlignmentLeft:b,content:w,textStyles:x,styles:C}=e;return(0,o.jsxs)("div",{className:"absolute domItem overflow-visible"+(d?" gravity":"")+(c?" playercharacter":""),style:{...C,border:(u||p?"1px":"0px")+" solid black",borderRadius:"2%",transformOrigin:"bottom left",transform:"rotate(".concat(-h,"deg)"),backgroundColor:l||u?l||"rgba(255, 0, 0, 0.3)":"rgba(255, 0, 0, 0)",width:i+"px",height:t+"px",bottom:r+"px",left:a+"px"},children:[(c||g)&&(0,o.jsx)("img",{className:"imagecenter"+(c&&n<0?" imgflip":"")+(c?" imageFrames":""),style:{width:i*y+"px",height:t*m+"px",top:"".concat(f||50)+"%",left:"".concat(b||50)+"%"},src:"".concat(g)}),(0,o.jsx)("div",{className:"my-auto text-center align-middle",children:(0,o.jsx)("span",{style:x,children:w})})]})}let r=Math.PI,n=Number("181"),s=Number("-1"),d=Number("120"),c=Number("60"),h=[r/180*s,r/180*n],g=[r/180*c,r/180*d],y=(e,t,i,o,l)=>e*Math.sin(l)-t*Math.cos(l)-i*Math.sin(l)+o*Math.cos(l),m=(e,t,i,o,l,a,r)=>{e.rigid?(t.XCordinate+=-o/a*i,t.YCordinate+=-l/a*i):t.rigid?(e.XCordinate+=o/a*i,e.YCordinate+=l/a*i):r&&(e.XCordinate+=i*r*(o/a),e.YCordinate+=i*r*(l/a),t.XCordinate+=i*(1-r)*(-o/a),t.YCordinate+=i*(1-r)*(-l/a))},u=(e,t,i,o,l,a)=>{if(e.rigid){let e=b([t.XVelocity,t.YVelocity]),o=(e?t.XVelocity>=0?Math.asin(t.YVelocity/e):r-Math.asin(t.YVelocity/e):0)-i,a=Math.cos(o)*e,n=Math.sin(o)*e,s=-a*Math.cos(i)+n*Math.cos(r/2+i),d=-a*Math.sin(i)+n*Math.sin(r/2+i);t.XVelocity=t.isPlayer?s:t.elasticity*s,t.YVelocity=Math.abs(d)<=l.gravityAcceleration?0:t.elasticity*d}else if(t.rigid){let t=b([e.XVelocity,e.YVelocity]),o=(t?e.XVelocity>=0?Math.asin(e.YVelocity/t):r-Math.asin(e.YVelocity/t):0)-i,a=Math.cos(o)*t,n=Math.sin(o)*t,s=-a*Math.cos(i)+n*Math.cos(r/2+i),d=-a*Math.sin(i)+n*Math.sin(r/2+i);e.XVelocity=e.isPlayer?s:e.elasticity*s,e.YVelocity=Math.abs(d)<=l.gravityAcceleration?0:e.elasticity*d}else{let o=b([e.XVelocity,e.YVelocity]),n=b([t.XVelocity,t.YVelocity]),s=(o?e.XVelocity>=0?Math.asin(e.YVelocity/o):r-Math.asin(e.YVelocity/o):0)-i,d=Math.cos(s)*o,c=Math.sin(s)*o,h=(n?t.XVelocity>=0?Math.asin(t.YVelocity/n):r-Math.asin(t.YVelocity/n):0)-i,g=Math.cos(h)*n,y=Math.sin(h)*n,m=g*Math.cos(i)+c*Math.cos(r/2+i),u=g*Math.sin(i)+c*Math.sin(r/2+i),p=d*Math.cos(i)+y*Math.cos(r/2+i),f=d*Math.sin(i)+y*Math.sin(r/2+i);e.XVelocity=e.isPlayer?m:a*m,e.YVelocity=Math.abs(u)<=l.gravityAcceleration?0:a*u,t.XVelocity=t.isPlayer?p:a*p,t.YVelocity=Math.abs(f)<=l.gravityAcceleration?0:a*f}},p=e=>Math.sqrt(e.reduce((e,t)=>(t>0&&(e+=t**2),e),0)),f=(e,t,i,o,l)=>{t.nextDashTime=new Date(l.getTime()),e>g[0]&&e<g[1]&&(t.dashCount=o.maxDashCount,t.lastjumpableCollisionAngle=e),e>=h[0]&&e<h[1]&&(t.jumpAvailable=!0,t.lastJumpableCollisionTime=new Date(l.getTime()+o.minJumpDeadline*i.timeInterval))},b=e=>Math.sqrt(e.reduce((e,t)=>e+=t**2,0));var w=i(7294);i(5675);var x=null,C=[],v={},V={};let Y=!!Number("0"),X=Number("60"),A=Number("1000"),M=Number("2200"),k=Number("10"),S={backgroundColor:"grey",backgroundImage:"url('2d_platformer_background_desert.jpg')",backgroundRepeat:"round",backgroundAttachment:"fixed",backgroundSize:"cover"},I={fixedLightSources:[],updatingLightSources:[]},j={roomHeight:A,roomWidth:M,gravityrate:k,timeInterval:Number("10"),itemsMinimumVelocity:Number("0.01"),restrictedBoundary:Y,groundHeight:X,maxYVelocity:Number("4"),gravityAcceleration:.01*k,showHitBox:!!Number("0")},F={Space:!1,ArrowRight:!1,ArrowLeft:!1,ArrowUp:!1,ArrowDown:!1,Shift:!1},R=[],D={maxXVelocity:Number("4"),playerAcceleration:Number("0.15"),XVelocityDecay:Number("0.04"),jumpVelocity:Number("4"),dashVelocity:Number("5"),minJumpDeadline:Number("10"),minDashDelay:Number("20"),maxDashCount:Number("2"),minimumGroundVelocity:Number("0.1")},L={jumpAvailable:!1,dashCount:0,nextDashTime:new Date,lastJumpableCollisionTime:new Date,lastjumpableCollisionAngle:Math.PI/2},T={lastLeft:new Date,lastRight:new Date,lastDownward:new Date,lastUpward:new Date},N=[{type:"ball",ballradius:40,XCordinate:100,YCordinate:300,XVelocity:2,YVelocity:0,gravity:!0,elasticity:0,isPlayer:!0,rigid:!1,srcImage:"./slime_animate.gif",idleFrameCount:1,walkFramesSrc:"./walk_cycle.png",walkFrameCount:0,jumpFramesSrc:"./slime_jump_up.png",jumpFrameCount:1,fallFrameSrc:"./slime_jump_down.png",fallFrameCount:1,modelAlignmentTop:54,modelAlignmentLeft:43,hitboxRadiusRatio:1.4,disableVelocityDecay:!1,lightSource:!0,lightSourceRadius:400}];function B(e,t,i,o){let l=o.split("."),a=l.pop();e["".concat(t)]=l.join("."),e["".concat(i)]=a}B(N[0],"playerIdleAnimationTitle","playerIdleAnimationFormat",N[0].srcImage),B(N[0],"playerWalkAnimationTitle","playerWalkAnimationFormat",N[0].walkFramesSrc),B(N[0],"playerJumpAnimationTitle","playerJumpAnimationFormat",N[0].jumpFramesSrc),B(N[0],"playerFallAnimationTitle","playerFallAnimationFormat",N[0].fallFrameSrc);let P=[{levelProperties:{height:2*A,width:1.5*M,offsetRight:0,offsetLeft:0,offsetUp:0,offsetDown:0,night:!0},levelTransitions:{up:null,down:null,left:null,right:2},levelRespawns:{default:[100,100],up:[100,100],down:[100,100],left:[100,100],right:[2100,100,.1]},levelItems:[{type:"box",height:X,width:1.5*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:0,YCordinate:0,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:80,width:80,tilt:0,content:"<-",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:200,YCordinate:200,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:80,tilt:0,content:"->",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:300,YCordinate:200,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:300,tilt:0,content:"Space",textStyles:{color:"white",fontSize:"44px",fontWeight:" 600"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:600,YCordinate:200,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:70,width:800,tilt:0,showBorder:!0,boxcolor:"skyblue",XCordinate:800,YCordinate:60,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:80,width:80,tilt:0,content:"<-",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:1100,YCordinate:300,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:80,tilt:0,content:"->",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:1300,YCordinate:300,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:80,tilt:90,content:"->",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:1280,YCordinate:400,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:80,tilt:90,content:"<-",textStyles:{color:"white",fontSize:"44px",fontWeight:" 700"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:1280,YCordinate:300,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:80,tilt:0,content:"+",textStyles:{color:"black",fontSize:"44px",fontWeight:" 800"},boxcolor:"rgba(0,0,0,0)",showBorder:!1,XCordinate:1385,YCordinate:300,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:80,width:150,tilt:0,content:"Shift",textStyles:{color:"white",fontSize:"44px",fontWeight:" 600"},boxcolor:"rgba(0,0,0,0.4)",showBorder:!0,XCordinate:1470,YCordinate:300,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,noCollision:!0},{type:"box",height:250,width:300,tilt:0,showBorder:!0,boxcolor:"skyblue",XCordinate:1900,YCordinate:60,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0}]},{levelProperties:{height:2*A,width:1.2*M,offsetRight:0,offsetLeft:0,offsetUp:0,offsetDown:0,night:!1},levelTransitions:{up:null,down:null,left:1,right:3},levelRespawns:{default:[100,100],up:[100,100],down:[100,100],left:[100,100],right:[2100,100,.1]},levelItems:[{type:"box",height:X,width:1.2*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:0,YCordinate:0,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:50,width:50,tilt:0,XCordinate:1300,YCordinate:A,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./fire.gif",lightSource:!0,lightSourceRadius:500,hitboxWidthRatio:1.8,hitboxHeightRatio:2.1,modelAlignmentTop:20,modelAlignmentLeft:47,deathZone:!0},{type:"box",height:50,width:50,tilt:0,XCordinate:1300,YCordinate:50,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./fire.gif",lightSource:!0,lightSourceRadius:500,hitboxWidthRatio:1.8,hitboxHeightRatio:2.1,modelAlignmentTop:20,modelAlignmentLeft:47,deathZone:!0},{type:"box",height:50,width:50,tilt:0,XCordinate:1350,YCordinate:50,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./fire.gif",lightSource:!0,lightSourceRadius:500,hitboxWidthRatio:1.8,hitboxHeightRatio:2.1,modelAlignmentTop:20,modelAlignmentLeft:47,deathZone:!0},{type:"box",height:100,width:300,tilt:20,XCordinate:1500,YCordinate:400,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./platform3.png",hitboxWidthRatio:1,hitboxHeightRatio:1.7,modelAlignmentLeft:50,modelAlignmentTop:35},{type:"box",height:100,width:300,tilt:-20,XCordinate:1e3,YCordinate:490,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./platform3.png",hitboxWidthRatio:1,hitboxHeightRatio:1.7,modelAlignmentLeft:50,modelAlignmentTop:35},{type:"box",height:100,width:200,tilt:0,XCordinate:400,YCordinate:400,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./platform2.png",hitboxWidthRatio:1.1,modelAlignmentTop:51,hitboxHeightRatio:1.5}]},{levelProperties:{height:A,width:1.5*M,night:!0},levelTransitions:{up:null,down:null,left:2,right:4},levelRespawns:{default:[100,100],up:[100,100],down:[100,100],left:[100,100],right:[2e3,100,.1]},levelItems:[{type:"box",height:750,width:200,tilt:20,styles:{backgroundImage:"url('rock texture.jpg')",backgroundRepeat:"repeat",backgroundSize:"400px 400px"},showBorder:!0,XCordinate:1600,YCordinate:-40,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:X,width:1.5*M,tilt:0,boxcolor:"#8B4513",styles:{backgroundImage:"url('rock texture.jpg')",backgroundRepeat:"repeat",backgroundSize:"400px 400px"},showBorder:!0,XCordinate:0,YCordinate:0,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:200,width:300,tilt:0,boxcolor:"purple",showBorder:!0,XCordinate:400,YCordinate:60,XVelocity:0,YVelocity:0,gravity:!0,elasticity:.5,rigid:!0},{type:"box",height:50,width:50,tilt:0,XCordinate:1800,YCordinate:50,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0,srcImage:"./fire.gif",lightSource:!0,lightSourceRadius:1e3,lightSourceFlicker:!0,lightFlickerRadiusChange:10,lightSourceFlickerFrames:100,hitboxWidthRatio:1.8,hitboxHeightRatio:2.1,modelAlignmentTop:20,modelAlignmentLeft:47,deathZone:!0}]},{levelProperties:{height:A,width:M,backGround:{backgroundColor:"grey",backgroundImage:"url('2d_platformer_background_desert.jpg')",backgroundRepeat:"round",backgroundAttachment:"fixed",backgroundSize:"cover"}},levelTransitions:{up:4,down:4,left:3,right:1},levelItems:[{type:"box",height:X,width:.5*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:0,YCordinate:0,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:X,width:.3*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:.7*M,YCordinate:0,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:X,width:.5*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:0,YCordinate:A-X,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0},{type:"box",height:X,width:.3*M,tilt:0,boxcolor:"#8B4513",showBorder:!0,XCordinate:.7*M,YCordinate:A-X,XVelocity:0,YVelocity:0,gravity:!1,elasticity:0,rigid:!0}]}];function W(){var e,t;let[i,n]=(0,w.useState)(1),[s,d]=(0,w.useState)(0),[c,h]=(0,w.useState)(0),[g,Y]=(0,w.useState)(!1),[X,k]=(0,w.useState)(!1),[B,W]=(0,w.useState)(!1),[_,H]=(0,w.useState)(!1),[E,U]=(0,w.useState)(!1),z=e=>{I.fixedLightSources=P[e-1].levelItems.filter(e=>e.lightSource&&e.rigid&&!e.lightSourceFlicker);let t=P[e-1].levelItems.filter(e=>e.lightSource&&e.lightSourceFlicker),i=N.filter(e=>e.lightSource);I.updatingLightSources=[...t,...i],h(s),d(e)},J=()=>{},Z=()=>{let e="default";for(let[t,i]of Object.entries(P[s-1].levelTransitions))i==c&&(e=t);let t=P[s-1].levelRespawns?P[s-1].levelRespawns:{default:[100,100],up:[100,100],down:[100,100],left:[100,100],right:[1e3,100,.1]};N[0].XCordinate=t[e][0]?t[e][0]:0,N[0].YCordinate=t[e][1]?t[e][1]:0,N[0].XVelocity=t[e][2]?t[e][2]:0,N[0].YVelocity=t[e][3]?t[e][3]:0},G=()=>{clearInterval(x),x=null,Y(!0),W(!0)};return(0,w.useEffect)(()=>{if(s>0&&!B&&(C=[...P[s-1].levelItems,...N],Y(!0)),B)J(),setTimeout(()=>{Z(),W(!1)},500);else if(s>0&&s<=P.length){var e,t,i,o;C=[...P[s-1].levelItems,...N],v={...P[s-1].levelTransitions};let l=null===(e=P[s-1].levelTransitions)||void 0===e?void 0:e.up,a=null===(t=P[s-1].levelTransitions)||void 0===t?void 0:t.right,n=null===(i=P[s-1].levelTransitions)||void 0===i?void 0:i.down,d=null===(o=P[s-1].levelTransitions)||void 0===o?void 0:o.left;if(V={...P[s-1].levelProperties,up:l?P[l-1].levelProperties:{},right:a?P[a-1].levelProperties:{},left:d?P[d-1].levelProperties:{},down:n?P[n-1].levelProperties:{}},x&&clearInterval(x),E){let e=document.getElementsByClassName("domItem"),t=document.getElementsByClassName("playercharacter"),i={lightingElement:document.getElementById("lightingContainer"),DomItems:e,DOMplayerCharacter:t,playerCharacterImage:document.getElementsByClassName("imageFrames"),cameraFrame:document.getElementsByClassName("cameraFrame")[0]};setTimeout(()=>{var e,t,o,l;let a,n,s,d,c,h,w,X,A,M;e=x,t=C,o=v,l=V,a=i.DomItems,n=i.DOMplayerCharacter,s=i.playerCharacterImage,d=i.cameraFrame,i.lightingElement,c=t.findIndex(e=>e.isPlayer),h=document.getElementsByClassName("updatingLightSource"),w=t[c],X=new Date,A="walk",M=!0,e&&g||(X=new Date,Y(!1),clearInterval(e),e=setInterval(function(){var e,i,c,g,x,C;let v,V,Y,k;X.setMilliseconds(X.getMilliseconds()+j.timeInterval),function(e){e.forEach((e,t)=>{"ball"==e.type?(e.centreXCordinate=e.XCordinate+e.ballradius,e.centreYCordinate=e.YCordinate+e.ballradius):"box"==e.type&&(e.centreXCordinate=e.XCordinate+e.width,e.centreYCordinate=e.YCordinate+e.height),e.lightSourceFlicker&&(e.currentFlickerFrame=e.currentFlickerFrame?(e.currentFlickerFrame+1)%e.lightSourceFlickerFrames:1)})}(t),e=X,j.groundHeight,t.forEach((t,i)=>{let a=t.XCordinate,r=t.YCordinate,n=2*t.ballradius,s=l.width-n,d=l.height-n,c=t.elasticity,h=D.XVelocityDecay,g=j.gravityAcceleration;(!t.gravity||t.isPlayer&&(e<L.nextDashTime||L.jumpAvaillable))&&(g=0),t.rigid&&(g=0,t.XVelocity=0,t.YVelocity=0);let y=t.XVelocity,m=t.YVelocity,u=Math.abs(y),p=Math.abs(m);a+=y,r+=m;let f=()=>{a>=s&&(y=-Math.abs(c*y)),a<=0&&(y=Math.abs(c*y)),r<=0&&(m=Math.abs(c*m),y=t.isPlayer?u>D.minimumGroundVelocity?y:0:u>=j.itemsMinimumVelocity?y*c:0),r>=d&&(m=-Math.abs(c*m)),r<=0?r=0:r>=l.height-n&&(r=l.height-n),a>=l.width-n?a=l.width-n:a<=0&&(a=0)};if(j.restrictedBoundary)f();else{var b,w,x,C;if(r<=-n+2&&m<0){if(o.down){z(o.down);let e=(l.offsetDown?l.offsetDown:0)-((null===(b=l.down)||void 0===b?void 0:b.offsetUp)?l.down.offsetUp:0);a-=e,r=(l.down.height?l.down.height:j.roomHeight)-n+2}else f()}else if(r>l.height&&m>0){if(o.up){z(o.up);let e=(l.offsetUp?l.offsetUp:0)-((null===(w=l.up)||void 0===w?void 0:w.offsetDown)?l.up.offsetDown:0);a-=e,r=0}else f()}if(a>l.width-n-2&&y>0){if(o.right){z(o.right);let e=(l.offsetRight?l.offsetRight:0)-((null===(x=l.right)||void 0===x?void 0:x.offsetLeft)?l.right.offsetLeft:0);a=0,r-=e}else f()}else if(a<=2&&y<0){if(o.left){z(o.left);let e=(l.offsetLeft?l.offsetLeft:0)-((null===(C=l.left)||void 0===C?void 0:C.offsetRight)?l.left.offsetRight:0);a=(l.left.width?l.left.width:j.roomWidth)-n-2,r-=e}else f()}}m=m<=-j.maxYVelocity?-j.maxYVelocity:m-g,t.XCordinate=a,t.YCordinate=r;let v=0,V=0;0!=u&&e>L.nextDashTime&&(v=(t.disableVelocityDecay||t.isPlayer&&(F.ArrowLeft||F.ArrowRight)?0:h)+(u>D.maxXVelocity?.01*u:0)),t.XVelocity=u>h?Math.sign(y)*(u-v):0,t.YVelocity=m,!t.gravity&&t.isPlayer&&(V=(F.ArrowDown||F.ArrowUp?0:h)+(p>D.maxXVelocity?.01*p:0),t.YVelocity=p>h?Math.sign(m)*(p-V):0)}),function(e,t,i,o,l,a,r,n,s,d){let c=o.maxXVelocity,h=o.playerAcceleration,g=o.jumpVelocity,y=o.dashVelocity,m=a.gravityAcceleration;if(t.XVelocity,new Date(l.lastJumpableCollisionTime.getTime()+o.minJumpDeadline*s)<d&&(l.jumpAvailable=!1,l.lastjumpableCollisionAngle=Math.PI/2),i.Space&&l.jumpAvailable&&(l.jumpAvailable=!1,t.YCordinate=t.YCordinate+1,t.YVelocity=(i.ArrowDown?1.2:1)*g),"ball"==t.type&&(r.offsetHeight<=2*t.ballradius||r.offsetWidth<=1.7*t.ballradius)&&d>=l.nextDashTime&&(r.style.height=2*t.ballradius+"px",r.style.width=2*t.ballradius+"px",n.style.height=2*t.ballradius+"px",n.style.width=2*t.ballradius+"px"),i.Shift&&l.dashCount>0&&l.nextDashTime<=d&&(--l.dashCount,l.jumpAvailable=!1,l.nextDashTime=new Date(d.getTime()+o.minDashDelay*s),i.ArrowLeft&&i.ArrowUp?(t.YVelocity=.7*y,t.XVelocity=-.7*y):i.ArrowRight&&i.ArrowUp?(t.YVelocity=.7*y,t.XVelocity=.7*y):i.ArrowRight&&i.ArrowDown?(t.YVelocity=-.7*y,t.XVelocity=.7*y):i.ArrowLeft&&i.ArrowDown?(t.YVelocity=-.7*y,t.XVelocity=-.7*y):i.ArrowUp?(r.style.height=2*t.ballradius+"px",n.style.height=2*t.ballradius+"px",t.YVelocity=y,t.XVelocity=0):i.ArrowLeft?(r.style.width=1.9*t.ballradius+"px",t.XVelocity=-y,t.YVelocity=0):i.ArrowRight?(r.style.width=1.9*t.ballradius+"px",t.XVelocity=y,t.YVelocity=0):i.ArrowDown?(r.style.width=1.9*t.ballradius+"px",t.YVelocity=-y,t.XVelocity=0):(t.XVelocity=(l.lastMoveIsRight?1:-1)*y,t.YVelocity=0)),t.XVelocity>-c&&i.ArrowLeft){[...r.classList].includes("imgflip")||r.classList.add("imgflip");let e=-h*Math.cos(l.lastjumpableCollisionAngle-Math.PI/2);t.XVelocity+=e;let i=l.lastjumpableCollisionAngle>Math.PI/2?0:1;if(l.jumpAvailable&&i){let e=m+h*Math.sin(l.lastjumpableCollisionAngle+Math.PI/2);t.YVelocity+=e}}if(t.XVelocity<c&&i.ArrowRight){[...r.classList].includes("imgflip")&&r.classList.remove("imgflip");let e=h*Math.cos(l.lastjumpableCollisionAngle-Math.PI/2);t.XVelocity+=e;let i=l.lastjumpableCollisionAngle>Math.PI/2?1:0;if(l.jumpAvailable&&i){let e=m+i*h*Math.sin(l.lastjumpableCollisionAngle-Math.PI/2);t.YVelocity+=e}}!t.gravity&&(t.YVelocity>-c&&i.ArrowDown&&(t.YVelocity-=h),t.YVelocity<c&&i.ArrowUp&&(t.YVelocity+=h)),r.offsetHeight>=1.7*t.ballradius&&i.ArrowDown?(r.style.height=1.8*t.ballradius+"px",n.style.height=1.8*t.ballradius+"px"):r.offsetHeight<=1.7*t.ballradius&&!i.ArrowDown&&(r.style.height=2*t.ballradius+"px",n.style.height=2*t.ballradius+"px")}(0,w,F,D,L,j,n[0],s[0],j.timeInterval,X),function(e,t,i,o,l,a,n){e.forEach((o,s)=>{e.forEach((e,d)=>{if(d>s&&!(o.rigid&&e.rigid)&&!o.noCollision&&!e.noCollision){let s=NaN;if("ball"==o.type&&"ball"==e.type){let d=o.XCordinate+o.ballradius,c=e.XCordinate+e.ballradius,h=o.YCordinate+o.ballradius,g=e.YCordinate+e.ballradius,y=o.ballradius+e.ballradius,p=h-g,w=d-c;if(p>y||w>y)return;let x=b([p,w]);if(x<y&&!(o.rigid&&e.rigid)){(o.isPlayer||e.isPlayer)&&(o.deathZone||e.deathZone)&&n();let d=o.ballradius/y;s=w>0?Math.asin(p/x):r-Math.asin(p/x);let c=((void 0==o.elasticity?1:o.elasticity)+(void 0==e.elasticity?1:e.elasticity))/2,h=o.ballradius+e.ballradius-x+1;m(o,e,h,w,p,x,d),o.isPlayer&&!e.deathZone?f(s,t,l,i,a):e.isPlayer&&!o.deathZone&&f((r+s)%r,t,l,i,a),u(o,e,s,t,l,c)}}if("box"==o.type&&"box"==e.type){let t=o.XCordinate+o.width/2,i=e.XCordinate+e.width/2,l=o.YCordinate+o.height/2,a=e.YCordinate+e.height/2,r=o.width/2+e.width/2;if(l-a>o.height/2+e.height/2||t-i>r)return}if("ball"==o.type&&"box"==e.type||"ball"==e.type&&"box"==o.type){let d="box"==o.type?o:e,c="ball"==o.type?o:e,h=c.XCordinate+c.ballradius,g=c.YCordinate+c.ballradius,m=d.tilt?d.tilt*(r/180):0,b=[0,0],w=[0,0],x=[0,0],C=[0,0];d.corner1&&d.rigid&&!d.moving?(b=d.corner1,w=d.corner2,x=d.corner3,C=d.corner4):d.rigid&&!d.moving?(b=[d.XCordinate,d.YCordinate],x=[(w=[d.XCordinate+Math.cos(r/2+m)*d.height,d.YCordinate+Math.sin(r/2+m)*d.height])[0]+Math.cos(m)*d.width,w[1]+Math.sin(m)*d.width],C=[b[0]+Math.cos(m)*d.width,b[1]+Math.sin(m)*d.width],d.corner1=b,d.corner2=w,d.corner3=x,d.corner4=C):d.rigid||d.moving||(b=[d.XCordinate,d.YCordinate],x=[(w=[d.XCordinate+Math.cos(r/2+m)*d.height,d.YCordinate+Math.sin(r/2+m)*d.height])[0]+Math.cos(m)*d.width,w[1]+Math.sin(m)*d.width],C=[b[0]+Math.cos(m)*d.width,b[1]+Math.sin(m)*d.width]);let v=r/2+m,V=y(h,g,b[0],b[1],v),Y=y(h,g,w[0],w[1],m),X=y(h,g,x[0],x[1],r+v),A=y(h,g,C[0],C[1],r+m);if(-V<c.ballradius&&-Y<c.ballradius&&-X<c.ballradius&&-A<c.ballradius){let h=[-V,-Y,-X,-A],g=p(h),y=c.ballradius-g;if(g<c.ballradius){(o.isPlayer||e.isPlayer)&&(o.deathZone||e.deathZone)&&n();let p=0,b=0,w=0;for(;p<4;){if(h[p]>0){h[(p+1)%4]>0?(b=(p+1)%4,w=h[(p+1)%4]):(b=p,w=h[p]);break}p++}s=m+(r-b*r/2)+Math.acos(w/g),c.XCordinate+=y*Math.cos(s),c.YCordinate+=y*Math.sin(s);let x=((void 0==o.elasticity?1:o.elasticity)+(void 0==e.elasticity?1:e.elasticity))/2;c.isPlayer&&!d.deathZone?f(s,t,l,i,a):d.isPlayer&&!c.deathZone&&f((r+s)%r,t,l,i,a),u(c,d,s,t,l,x)}}}}})})}(t,L,D,0,j,X,G),i=M,c=j.roomWidth,g=j.roomHeight,v=d.scrollLeft,V=d.scrollTop,Y=v,k=V,l.width>c&&(w.XCordinate<.4*c&&v>0?Y=0:w.XCordinate>l.width-.4*c&&v<l.width-c?Y=l.width-c:w.XCordinate>.4*c&&w.XCordinate<l.width-.4*c&&(w.XVelocity>.1?Y=w.XCordinate-.4*c:w.XVelocity<-.1&&(Y=w.XCordinate-.6*c))),l.height>g&&(w.YCordinate<.5*g&&V<l.height-g?k=l.height-(g+5):w.YCordinate>l.height-.5*g&&V>0?k=0:w.YCordinate>.5*g&&w.YCordinate<l.height-.5*g&&(w.YVelocity>.1?k=l.height-w.YCordinate-.5*g:w.YVelocity<-.1&&(k=l.height-w.YCordinate-.5*g))),i?d.scroll({left:Y,top:k,behavior:"instant"}):(x=Y,C=k,(x!=v||C!=V)&&d.scroll({left:v+(x-v)*.05,top:V+(C-V)*.1,behavior:"instant"}));let S=0;t.forEach((e,t)=>{if(a[t].style.left=e.XCordinate+"px",a[t].style.bottom=e.YCordinate+"px",(null==h?void 0:h.length)&&(!e.rigid||e.lightSourceFlicker)&&e.lightSource){if(h[S].setAttribute("cx",e.centreXCordinate),h[S].setAttribute("cy",l.height-e.centreYCordinate),e.lightSourceFlicker){let t=e.currentFlickerFrame/e.lightSourceFlickerFrames*Math.PI;h[S].setAttribute("r",e.lightSourceRadius-e.lightFlickerRadiusChange*Math.sin(t))}S++}e.isPlayer&&(A=function(e,t,i,o,l,a,r){if(t){if(e.idleFrameCount&&.1>Math.abs(e.XVelocity)&&.1>Math.abs(e.YVelocity)){if("idle"!=a){let i=0%e.idleFrameCount+1;t.src=e.playerIdleAnimationTitle+i+"."+e.playerIdleAnimationFormat,a="idle"}}else if(e.walkframeCount&&Math.abs(e.XVelocity)>0&&e.YVelocity<.2){if("walk"!=a){let i=0%e.walkFrameCount+1;t.src=e.playerWalkAnimationTitle+i+"."+e.playerWalkAnimationFormat,a="walk"}}else if(e.jumpFrameCount&&e.YVelocity>.2){if("jump"!=a){let i=0%e.jumpFrameCount+1;t.src=e.playerJumpAnimationTitle+i+"."+e.playerJumpAnimationFormat,a="jump"}}else if(e.fallFrameCount&&e.YVelocity<-.2&&!o.jumpAvailable){if("fall"!=a){let i=r%e.fallFrameCount+1;t.src=e.playerFallAnimationTitle+i+"."+e.playerFallAnimationFormat,a="fall"}}else if("idle"!=a&&o.jumpAvailable){let i=r%e.idleFrameCount+1;t.src=e.playerIdleAnimationTitle+i+"."+e.playerIdleAnimationFormat,a="idle"}return a}}(e,s[0],0,L,0,A,0))}),M=!1},j.timeInterval)),x=e,window.addEventListener("keydown",function(e){if(e.defaultPrevented)return;let t=new Date;switch(e.key){case" ":F.Space=!0;break;case"ArrowUp":F.ArrowUp=!0,T.lastUp=t;break;case"ArrowLeft":F.ArrowLeft=!0,T.lastLeft=t;break;case"ArrowRight":F.ArrowRight=!0,T.lastRight=t;break;case"ArrowDown":F.ArrowDown=!0,T.lastDown=t;break;case"Shift":F.Shift=!0;break;default:return}e.preventDefault()},!0),window.addEventListener("keyup",function(e){if(!e.defaultPrevented){switch(e.key){case" ":F.Space=!1;break;case"ArrowUp":F.ArrowUp=!1;break;case"ArrowLeft":F.ArrowLeft=!1;break;case"ArrowRight":F.ArrowRight=!1;break;case"ArrowDown":F.ArrowDown=!1;break;case"Shift":F.Shift=!1;break;default:return}e.preventDefault()}},!0)},200)}}else s>P.length&&(clearInterval(x),x=null,k(!0))},[s,B]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"gravitycontainer cameraFrame fixed mx-auto rounded-md item",style:{height:A+"px",width:M+"px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",overflow:"scroll"},children:[(0,o.jsxs)("div",{className:"".concat(E&&V.night?"lightingContainer":""," absolute"),style:{...S,height:V.height+"px",width:V.width+"px",overflow:"hidden"},children:[E&&s&&!B?C.map((e,t)=>"ball"==e.type?(0,o.jsx)(l,{ballradius:e.ballradius,ballcolor:e.ballcolor,XCordinate:e.XCordinate,YCordinate:e.YCordinate,XVelocity:e.XVelocity,YVelocity:e.YVelocity,gravity:e.gravity,isPlayer:e.isPlayer,srcImage:e.srcImage,hitboxRadiusRatio:e.hitboxRadiusRatio,showHitBox:j.showHitBox,showBorder:e.showBorder,modelAlignmentTop:e.modelAlignmentTop,modelAlignmentLeft:e.modelAlignmentLeft},t):"box"==e.type?(0,o.jsx)(a,{height:e.height,width:e.width,boxcolor:e.boxcolor,XCordinate:e.XCordinate,YCordinate:e.YCordinate,XVelocity:e.XVelocity,YVelocity:e.YVelocity,tilt:e.tilt,gravity:e.gravity,isPlayer:e.isPlayer,srcImage:e.srcImage,hitboxWidthRatio:e.hitboxWidthRatio,hitboxHeightRatio:e.hitboxHeightRatio,showHitBox:j.showHitBox,showBorder:e.showBorder,modelAlignmentTop:e.modelAlignmentTop,modelAlignmentLeft:e.modelAlignmentLeft,content:e.content,textStyles:e.textStyles,styles:e.styles},t):""):"",E?"":(0,o.jsx)("div",{className:"px-5 hidden lg:block py-2 button-34 rounded text-4xl text-bold font-bold",style:{position:"fixed",top:"50%",left:"50%"},onClick:()=>{U(!0),z(1)},children:"Start"})]}),i&&R.map((e,t)=>(0,o.jsx)("div",{className:"absolute rounded-full",style:{backgroundColor:e[2]||"pink",width:"10px",height:"10px",bottom:e[1]-5+"px",left:e[0]-5+"px"}},t)),s&&V.night?(0,o.jsxs)("svg",{className:"".concat(E&&!B&&V.night?"lightingContainer":""," absolute"),style:{height:V.height+"px",width:V.width+"px"},children:[(0,o.jsx)("rect",{x:"0",y:"0",width:V.width+1,height:V.height+1,mask:"url(#fullcover)"}),(0,o.jsx)("defs",{children:(0,o.jsxs)("mask",{id:"fullcover",children:[(0,o.jsxs)("radialGradient",{id:"myGradient",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:"rgba(0,0,0,1)"}),(0,o.jsx)("stop",{offset:"80%",stopColor:"rgba(0,0,0,1)"}),(0,o.jsx)("stop",{offset:"90%",stopColor:"rgba(0,0,0,0.5)"}),(0,o.jsx)("stop",{offset:"100%",stopColor:"rgba(0,0,0,0)"})]}),(0,o.jsx)("rect",{width:"100%",height:"100%",fill:"rgba(256,256,256,0.95)"}),null===(e=I.fixedLightSources)||void 0===e?void 0:e.map((e,t)=>(0,o.jsx)("circle",{id:"fixed"+s+"light"+t,r:e.lightSourceRadius,cx:e.XCordinate,cy:V.height-e.YCordinate,fill:"url('#myGradient')"},"fixed"+s+"light"+t)),null===(t=I.updatingLightSources)||void 0===t?void 0:t.map((e,t)=>(0,o.jsx)("circle",{id:"updating"+s+"light"+t,className:"updatingLightSource",r:e.lightSourceRadius,cx:e.XCordinate,cy:V.height-e.YCordinate,fill:"url('#myGradient')"},"updating"+s+"light"+t))]})})]}):""]}),(0,o.jsx)("div",{className:"block p-2 lg:hidden rounded text-xl text-bold font-bold",style:{position:"fixed",top:"50%"},children:"This being a game engine currently for large screens requires keyboard input."}),(0,o.jsxs)("div",{className:"hidden",children:[[...N].map((e,t)=>{let i=[];return["Walk","Jump","Fall","Idle"].map((l,a)=>{[...Array(e["".concat(l.toLowerCase(),"FrameCount")])].map((r,n)=>{e["".concat(l.toLowerCase(),"FrameCount")]&&i.push((0,o.jsx)("img",{alt:"hidden"+t+r+n+"resource"+a,src:N[0]["player".concat(l,"AnimationTitle")]+(n+1)+"."+N[0]["player".concat(l,"AnimationFormat")]},"hidden"+t+r+n+"resource"+a))})}),e.srcImage&&i.push((0,o.jsx)("img",{alt:"hiddenImageLevelItems"+t,src:e.srcImage},"hiddenImageLevelItems"+t)),(0,o.jsx)(o.Fragment,{children:i.map(e=>e)})}),[...P].map((e,t)=>{let i=[];return e.levelItems.map((e,l)=>{var a;["Walk","Jump","Fall","Idle"].map((l,a)=>{[...Array(e["".concat(l.toLowerCase(),"FrameCount")])].map((r,n)=>{e["".concat(l.toLowerCase(),"FrameCount")]&&i.push((0,o.jsx)("img",{alt:"hidden"+t+"level"+r+n+"resource"+a,src:e["player".concat(l,"AnimationTitle")]+(n+1)+"."+e["player".concat(l,"AnimationFormat")]},"hidden"+t+"level"+r+n+"resource"+a))})}),e.srcImage&&i.push((0,o.jsx)("img",{alt:"hiddenImage"+t+"LevelItems"+l,src:e.srcImage},"hiddenImage"+t+"LevelItems"+l)),(null===(a=e.styles)||void 0===a?void 0:a.backgroundImage)&&i.push((0,o.jsx)("img",{alt:"hiddenImage"+t+"BgLevelItems"+l,src:e.styles.backgroundImage.split("'")[1]},"hiddenImage"+t+"BgLevelItems"+l))}),(0,o.jsx)(o.Fragment,{children:i.map(e=>e)})})]})]})}}},function(e){e.O(0,[675,888,774,179],function(){return e(e.s=4382)}),_N_E=e.O()}]);